{# Table Focus Layout - 표 중심 슬라이드 (Tailwind) #}
<div class="slide bg-white relative overflow-hidden my-5 mx-auto rounded-2xl shadow-2xl {{ slide_tailwind_classes }}"
     data-slide-id="{{ slide_id }}" data-layout="table_focus">

    <!-- Top accent bar -->
    <div class="absolute top-0 left-0 right-0 h-1 gradient-primary"></div>

    <!-- Content -->
    <div class="h-full flex flex-col" style="padding: 5% 6%;">
        <!-- Header -->
        <div style="flex: 0 0 auto; margin-bottom: 4%;">
            {% set ns = namespace(found=false) %}
            {% for element in elements %}
                {% if element.role == 'title' and not ns.found %}
                    <h2 class="text-2xl font-bold text-slate-800 animate-slide-up flex items-center gap-3">
                        <span class="w-1.5 h-8 bg-gradient-to-b from-primary-500 to-accent rounded-full"></span>
                        {{ element.content.text }}
                    </h2>
                    {% set ns.found = true %}
                {% endif %}
            {% endfor %}
        </div>

        <!-- Table Body -->
        <div class="flex-1 overflow-auto" style="min-height: 0;">
            {% for element in elements %}
                {% if element.kind == 'table' %}
                    <div class="overflow-x-auto rounded-xl border border-slate-200 shadow-sm animate-fade-in">
                        {% if element.content.title %}
                            <div class="px-5 py-3 bg-gradient-to-r from-slate-50 to-slate-100 border-b border-slate-200">
                                <p class="font-semibold text-slate-700 flex items-center gap-2">
                                    <svg class="w-4 h-4 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                    {{ element.content.title }}
                                </p>
                            </div>
                        {% endif %}
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="bg-gradient-to-r from-primary-600 to-primary-700">
                                    {% for col in element.content.columns %}
                                        <th class="px-5 py-3 text-left text-white font-semibold first:rounded-tl-none last:rounded-tr-none">
                                            {{ col }}
                                        </th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                {% for row in element.content.rows %}
                                    <tr class="hover:bg-primary-50/50 transition-colors group">
                                        {% for cell in row %}
                                            <td class="px-5 py-3 text-slate-600 group-hover:text-slate-800 transition-colors">
                                                {% if cell is number %}
                                                    <span class="font-medium text-primary-600">
                                                        {{ "{:,.0f}".format(cell) if cell == cell|int else "{:,.2f}".format(cell) }}
                                                    </span>
                                                {% else %}
                                                    {{ cell if cell is not none else '-' }}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endfor %}

            {# Additional notes below table #}
            {% for element in elements %}
                {% if element.kind == 'text' and element.role != 'title' %}
                    <p class="text-sm text-slate-500 mt-5 flex items-start gap-2 animate-fade-in delay-100">
                        <svg class="w-4 h-4 mt-0.5 text-slate-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        {{ element.content.text }}
                    </p>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Footer -->
    <div class="absolute bottom-0 left-0 right-0 flex justify-between items-center text-xs border-t border-slate-100" style="padding: 1.5% 4%;">
        {% if citations %}
        <span class="text-slate-400 flex gap-2 flex-wrap">
            {% for citation in citations %}
                <span class="bg-slate-100 text-slate-500 px-2 py-0.5 rounded" title="{{ citation.source | default('') }}">
                    [{{ loop.index }}]
                </span>
            {% endfor %}
        </span>
        {% else %}
        <span></span>
        {% endif %}
        <span class="bg-slate-100 text-slate-500 px-2.5 py-0.5 rounded-full font-medium">{{ slide_index + 1 }}</span>
    </div>
</div>
